<template>
    <loading-spinner v-if="loading" />
    <page v-else :nav-items="navItems" :root-route-name="rootRoute" />
</template>

<script lang="ts">
    import { Component, Vue } from 'vue-property-decorator';
    import { ListNavItem } from '../../components/common/ListNav.vue';
    import { EmpireDataModule } from '../../data/EmpireDataModule';
    import { ServerSettingsDataModule } from '../../data/ServerSettingsDataModule';

    @Component({})
    export default class Index extends Vue {
        private readonly rootRoute = 'empire';
        private loading = true;

        async mounted() {
            await EmpireDataModule.ready;
            await ServerSettingsDataModule.ready;

            this.loading = false;
        }

        private get navItems(): ListNavItem[] {
            const items: ListNavItem[] = [
                {
                    label: this.$i18n.$t.empire.production.header,
                    to: { name: 'empire/production' },
                },
                {
                    label: this.$i18n.$t.empire.amortization.header,
                    to: { name: 'empire/amortization' },
                },
            ];

            if (ServerSettingsDataModule.serverSettings.lifeforms.enabled) {
                items.push({
                    label: this.$i18n.$t.empire.lifeforms.header,
                    to: { name: 'empire/lifeforms' },
                });
            }


            //TODO: enable point distribution view when properly implemented
            // items.push({
            //     label: 'LOCA: Point Distribution',
            //     to: { name: 'empire/point-distribution' },
            // });

            return items;
        }
    }
</script>